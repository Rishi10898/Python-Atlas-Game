<!DOCTYPE html>
<html>
<head>
    <title>Tag Game</title>
    <style>
        canvas { border: 1px solid black; }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // Player and AI bot objects
        const players = [
            { x: 100, y: 100, color: 'blue', controls: { up: 'w', left: 'a', right: 'd' }, isAI: false },
            { x: 200, y: 200, color: 'red', controls: { up: 'ArrowUp', left: 'ArrowLeft', right: 'ArrowRight' }, isAI: true },
            { x: 300, y: 300, color: 'green', controls: { up: 'i', left: 'j', right: 'l' }, isAI: true },
            { x: 400, y: 400, color: 'yellow', controls: { up: 't', left: 'f', right: 'h' }, isAI: true }
        ];

        let itPlayer = 0; // Index of the player who is "it"

        // Movement speed
        const speed = 5;

        // Draw all players
        function drawPlayers() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            players.forEach((player, index) => {
                ctx.fillStyle = player.color;
                ctx.fillRect(player.x, player.y, 20, 20);
                if (index === itPlayer) {
                    ctx.fillStyle = 'white';
                    ctx.fillRect(player.x + 5, player.y - 10, 10, 10); // Arrow above "it" player
                }
            });
        }

        // Handle keyboard input
        document.addEventListener('keydown', (e) => {
            players.forEach((player, index) => {
                if (!player.isAI) {
                    if (e.key === player.controls.up) player.y -= speed;
                    if (e.key === player.controls.left) player.x -= speed;
                    if (e.key === player.controls.right) player.x += speed;
                }
            });
        });

        // Simple AI bot movement
        function moveAI() {
            players.forEach((player, index) => {
                if (player.isAI) {
                    // Simple chase logic: move towards the "it" player
                    if (index !== itPlayer) {
                        if (player.x < players[itPlayer].x) player.x += speed;
                        if (player.x > players[itPlayer].x) player.x -= speed;
                        if (player.y < players[itPlayer].y) player.y += speed;
                        if (player.y > players[itPlayer].y) player.y -= speed;
                    }
                }
            });
        }

        // Check for tagging
        function checkTag() {
            players.forEach((player, index) => {
                if (index !== itPlayer && Math.abs(player.x - players[itPlayer].x) < 20 && Math.abs(player.y - players[itPlayer].y) < 20) {
                    itPlayer = index;
                }
            });
        }

        // Game loop
        function gameLoop() {
            moveAI();
            checkTag();
            drawPlayers();
            requestAnimationFrame(gameLoop);
        }

        gameLoop();
    </script>
</body>
</html>
