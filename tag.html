<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multiplayer Tag Game</title>
<style>
  body { margin: 0; font-family: sans-serif; background: #111; color: #fff; display: flex; flex-direction: column; align-items: center; }
  canvas { background: #222; display: block; margin-top: 20px; border-radius: 10px; }
  #scoreboard { display: flex; justify-content: center; gap: 20px; margin-top: 10px; font-size: 18px; }
  .playerScore { padding: 5px 10px; border-radius: 5px; }
  .red { background: red; } 
  .blue { background: blue; } 
  .green { background: green; } 
  .purple { background: purple; } 
  .yellow { background: yellow; color: #000; }
</style>
</head>
<body>
<h1>Multiplayer Tag Game</h1>
<div id="scoreboard">
  <div id="score1" class="playerScore red">Red: 0</div>
  <div id="score2" class="playerScore blue">Blue: 0</div>
  <div id="score3" class="playerScore green">Green: 0</div>
  <div id="score4" class="playerScore purple">Purple: 0</div>
</div>
<canvas id="game" width="800" height="600"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');

const players = [
  { x: 50, y: 50, color: 'red', up:'w', down:'s', left:'a', right:'d', speed: 4, isIt: true, score: 0 },
  { x: 750, y: 50, color: 'blue', up:'ArrowUp', down:'ArrowDown', left:'ArrowLeft', right:'ArrowRight', speed: 4, isIt: false, score: 0 },
  { x: 50, y: 550, color: 'green', up:'i', down:'k', left:'j', right:'l', speed: 4, isIt: false, score: 0 },
  { x: 750, y: 550, color: 'purple', up:'t', down:'g', left:'f', right:'h', speed: 4, isIt: false, score: 0 }
];

const keys = {};
document.addEventListener('keydown', e => keys[e.key.toLowerCase()] = true);
document.addEventListener('keyup', e => keys[e.key.toLowerCase()] = false);

function update() {
  players.forEach(p => {
    if(keys[p.up]) p.y -= p.speed;
    if(keys[p.down]) p.y += p.speed;
    if(keys[p.left]) p.x -= p.speed;
    if(keys[p.right]) p.x += p.speed;

    // Keep inside canvas
    p.x = Math.max(20, Math.min(canvas.width - 20, p.x));
    p.y = Math.max(20, Math.min(canvas.height - 20, p.y));
  });

  // Tagging logic
  const itPlayer = players.find(p => p.isIt);
  players.forEach(p => {
    if(p !== itPlayer) {
      const dx = itPlayer.x - p.x;
      const dy = itPlayer.y - p.y;
      const distance = Math.sqrt(dx*dx + dy*dy);
      if(distance < 30) {
        itPlayer.isIt = false;
        p.isIt = true;
        p.score++;
        updateScores();
      }
    }
  });
}

function updateScores() {
  players.forEach((p, i) => {
    const scoreEl = document.getElementById('score' + (i+1));
    scoreEl.textContent = `${capitalize(p.color)}: ${p.score}`;
    scoreEl.className = `playerScore ${p.isIt ? 'yellow' : p.color}`;
  });
}

function capitalize(str) { return str.charAt(0).toUpperCase() + str.slice(1); }

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  players.forEach(p => {
    ctx.fillStyle = p.isIt ? 'yellow' : p.color;
    ctx.beginPath();
    ctx.arc(p.x, p.y, 20, 0, Math.PI*2);
    ctx.fill();
  });
}

function gameLoop() {
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
